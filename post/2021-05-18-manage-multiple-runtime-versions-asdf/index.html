<!doctype html><html dir=ltr lang=zh-tw data-theme=dark><head>
<title> Neo Hsu | Manage multiple runtime versions - asdf </title>
<meta charset=utf-8><meta name=generator content="Hugo 0.87.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name=description content="Code wins arguments.">
<meta name=google-site-verification content="t0qlhlMvK4AFx4Vuu3778mSjl4ymmiLNZjx14mJ7u2Q">
<link rel=stylesheet href=/css/main.min.b29fc5408bdb71afaf8c3736989fad5b879056ad6ee964a41a4cb79f2b5b381e.css integrity="sha256-sp/FQIvbca+vjDc2mJ+tW4eQVq1u6WSkGky3nytbOB4=" crossorigin=anonymous type=text/css>
<link rel=stylesheet href=/css/markupHighlight.min.f798cbda9aaa38f89eb38be6414bd082cfd71a6780375cbf67b6d2fb2b96491e.css integrity="sha256-95jL2pqqOPies4vmQUvQgs/XGmeAN1y/Z7bS+yuWSR4=" crossorigin=anonymous type=text/css>
<link rel=stylesheet href=/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous>
<link rel="shortcut icon" href=/favicon.ico type=image/x-icon>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=canonical href=/post/2021-05-18-manage-multiple-runtime-versions-asdf/>
<script type=text/javascript src=/js/anatole-header.min.0c05c0a90d28c968a1cad4fb31abd0b8e1264e788ccefed022ae1d3b6f627514.js integrity="sha256-DAXAqQ0oyWihytT7MavQuOEmTniMzv7QIq4dO29idRQ=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.7fd87181cdd7e8413aa64b6867bb32f3a8dc242e684fc7d5bbb9f600dbc2b6eb.js integrity="sha256-f9hxgc3X6EE6pktoZ7sy86jcJC5oT8fVu7n2ANvCtus=" crossorigin=anonymous></script>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Manage multiple runtime versions - asdf">
<meta name=twitter:description content="最近在 Node.js 台灣 看到有人在介紹如何安裝 NodeJS">
</head>
<body><div class="sidebar animated fadeInDown">
<div class=logo-title>
<div class=title>
<img src="http://www.gravatar.com/avatar/a6974d6335aac6400019a5bd307aeca8?s=500" alt="profile picture">
<h3 title><a href=/>Learn Or Die</a></h3>
<div class=description>
<p>Code wins arguments.</p>
</div>
</div>
</div>
<ul class=social-links>
<li>
<a href=https://github.com/neohsu rel=me aria-label=GitHub>
<i class="fab fa-github fa-2x" aria-hidden=true></i>
</a>
</li>
<li>
<a href=https://www.linkedin.com/in/neohsu rel=me aria-label=Linkedin>
<i class="fab fa-linkedin fa-2x" aria-hidden=true></i>
</a>
</li>
<li>
<a href=https://www.facebook.com/NeoHsuDroid rel=me aria-label=Facebook>
<i class="fab fa-facebook fa-2x" aria-hidden=true></i>
</a>
</li>
<li>
<a href=https://twitter.com/neohsudroid rel=me aria-label=Twitter>
<i class="fab fa-twitter fa-2x" aria-hidden=true></i>
</a>
</li>
</ul>
<div class=footer>
<div class=by_farbox>&copy; Neo Hsu 2021 </div>
</div>
</div>
<div class=main>
<div class="page-top animated fadeInDown">
<a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
</a>
<ul class=nav id=navMenu>
<li><a href=/ title>Home</a></li>
<li><a href=/post/ title>Posts</a></li>
<li class=theme-switch-item>
<a class=theme-switch title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div class=autopagerize_page_element>
<div class=content>
<div class="post animated fadeInDown">
<div class=post-content>
<div class=post-title>
<h3>Manage multiple runtime versions - asdf</h3>
<div class=info>
<em class="fas fa-calendar-day"></em>
<span class=date> Tue, May 18, 2021
</span>
<em class="fas fa-stopwatch"></em>
<span class=reading-time>2-minute read</span>
</div>
</div>
<p>最近在 <a href=https://www.facebook.com/groups/262800543746083>Node.js 台灣</a> 看到有人在介紹如何安裝 <a href=https://nodejs.org/en/>NodeJS</a><br>
其實有在使用 NodeJS 當 Backend 的 developer 通常都會用 <a href>NVM</a> 來進行安裝，<br>
原因是可以隔離作業系統本身的檔案，畢竟 JavaScript 的撰寫都會比較飄逸，有時候會在意想不到的地方寫了一些檔案 Orz<br>
另外還可以自由切換 NodeJS 版本，主要也是 NodeJS 前期迭代版本比較快速需要多版本測試一下 XDD</p>
<p>在有 runtime engine 的語言蠻常延伸出多版本管理的工具，例如 gvm, nvm, rbenv, pyenv&mldr;<br>
自己之前再撰寫 NodeJS 時一開始也是使用了 NVM 管理 NodeJS 版本，<br>
但之後開始撰寫 Golang 後，也套用了 gvm 來做版本控制，<br>
用了一段時間後覺得要進行兩套版本管理的 tool 覺得蠻厭世的，<br>
就去尋找新的替代方案，結果找到了 <a href=https://asdf-vm.com/>asdf</a></p>
<blockquote>
<p>Manage multiple runtime versions with a single CLI tool</p>
</blockquote>
<p>這標題下得根本就是我想找的東西啊!!!<br>
<strong>asdf</strong> 操作上蠻直覺的，下面就介紹一下它該如何操作</p>
<h1 id=install-asdf>Install asdf</h1>
<p><strong>asdf</strong> 文件中提供了蠻多種安裝方式，但官方說使用 HomeBrew 安裝會有點 <a href=https://github.com/asdf-vm/asdf/issues/785>issue</a><br>
最後我選擇用 Git 方式安裝 asdf，由於自己有在管理 <a href=https://github.com/NeoHsu/dotfiles>dotfiles</a> 透過 Git Submodule 安裝還蠻順手的，</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>git clone https://github.com/asdf-vm/asdf.git ~/.asdf --branch v0.8.0
</code></pre></div><p>將工具設定到自己的 zshrc 中</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=c1># 設定 asdf 腳本</span>
<span class=nb>source</span> <span class=nv>$HOME</span>/.asdf/asdf.sh
<span class=c1># 設定 asdf 指令補全</span>
<span class=nb>source</span> <span class=nv>$HOME</span>/.asdf/completions/asdf.bash
</code></pre></div><h1 id=install-runner-engine>Install runner engine</h1>
<p>在 <strong>asdf</strong> 的架構下，我們需要加 plugin 來對應到指定的 runner engine</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=c1># asdf plugin add &lt;name&gt;</span>
asdf plugin add golang
asdf plugin add nodejs
</code></pre></div><p>這時候還沒安裝 <strong>runner engine</strong> 到你的機器上，只是單純和 <strong>asdf</strong> 説我想要安裝什麼 <strong>runner engine</strong>，<br>
你可以透過下面指令找出目前官方有的 <strong>runner engine</strong> 版本</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=c1># asdf list all &lt;name&gt;</span>
asdf list all golang
<span class=c1># 相當於 nvm ls-remote 的效果</span>
asdf list all nodejs
</code></pre></div><p>選擇你要安裝的版本後，透過下面指令安裝</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=c1># asdf install &lt;name&gt; &lt;version&gt;</span>
asdf install golang 1.16.4
asdf install nodejs 16.1.0
</code></pre></div><p>安裝完後可以檢查一下已安裝的 runner engine</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=c1># asdf list &lt;name&gt;</span>
asdf list golang
asdf list nodejs
</code></pre></div><h1 id=set-current-version>Set Current Version</h1>
<p>經過上面的操作後，我們只是安裝好想要的 runner engine 還沒設定當下要使用的版本，<br>
在 <strong>asdf</strong> 提供了 3 種設定使用版本的方式:</p>
<ol>
<li><strong>global</strong>: 會建立 $HOME/.tool-versions 檔案紀錄設定的版本
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=c1># asdf global &lt;name&gt; &lt;version&gt;</span>
asdf global golang 1.16.4
asdf global nodejs 16.1.0
</code></pre></div></li>
</ol>
<blockquote>
<p>類似 git global config 設定</p>
</blockquote>
<ol start=2>
<li><strong>shell</strong>: 會在目前的 shell session 紀錄設定的版本
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=c1># asdf shell &lt;name&gt; &lt;version&gt;</span>
asdf shell golang 1.16.4
asdf shell nodejs 16.1.0
</code></pre></div></li>
<li><strong>local</strong>: 會在當前的資料夾內建立 .tool-versions 檔案紀錄設定的版本
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=c1># asdf local &lt;name&gt; &lt;version&gt;</span>
asdf <span class=nb>local</span> golang 1.16.4
asdf <span class=nb>local</span> nodejs 16.1.0
</code></pre></div></li>
</ol>
<blockquote>
<p>類似 git config 設定</p>
</blockquote>
<p>可以透過下面指令看當前設定的版本</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>asdf current
</code></pre></div><p>以上簡單介紹一下 <strong>asdf</strong> 的操作，希望能讓剛接觸的人馬上入手使用，<br>
其實還有一些 <strong>environment</strong> 設定可以操作，<br>
大家熟悉後可以再進階研究一下喔！</p>
</div>
<div class=post-footer>
<div class=info>
<span class=separator><a class=category href=/categories/asdf/>asdf</a><a class=category href=/categories/nvm/>NVM</a><a class=category href=/categories/runtime/>runtime</a><a class=category href=/categories/golang/>Golang</a><a class=category href=/categories/nodejs/>NodeJS</a></span>
</div>
</div>
<div id=fb_comments_container>
<h2>comments</h2>
<script src=https://utteranc.es/client.js repo=NeoHsu/neohsu.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script>
</div>
</div>
</div>
</div>
</div>
<script type=text/javascript src=/js/medium-zoom.min.83cb1dd5fea8d42d87d1e601a07faa73089ad0ef9ccfe5daf6041289ebcc4e46.js integrity="sha256-g8sd1f6o1C2H0eYBoH+qcwia0O+cz+Xa9gQSievMTkY=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FCB9G1E569"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-FCB9G1E569')</script></body>
</html>